<template>
  <!-- Page, data-name contains page name which can be used in page callbacks -->
  <div class="page" data-name="home">
    <!-- Top Navbar -->
    <div class="navbar">
      <div class="navbar-inner">
        <div class="title sliding">뽀빠이 Startup</div>
      </div>
    </div>
    <!-- FAB Left Top (Yellow) -->
    <div class="fab fab-extended fab-right-top color-red" id="photo-btn">
      <a href="">
        <i class="icon f7-icons if-not-md">add</i>
        <i class="icon material-icons md-only">add</i>
        <div class="fab-text" id="photo-btn">Add Photo</div>
      </a>
    </div>

    <!-- Scrollable page content-->
    <div class="page-content">
      <div class="block-title">오늘의 포인트</div>
      <div class="block block-strong">
        <div class="row">
          <div class="gauge point-gauge"></div>
        </div>
        <br>
        <!-- <div class="row">
          <div class="col text-align-center">
            <div class="gauge gauge-init" data-type="semicircle" data-value="0.77" data-value-text="8pt"
              data-border-color="#ff9800" data-label-text="8pt" data-label-text-color="#ff9800"
              data-label-font-weight="800" data-label-font-size="12" data-border-width="10"></div>
          </div>
        </div> -->
      </div>

      <div class="block">
        <p class="row">
          <button class="col button button-fill color-blue" id="detail-btn">포인트 적립 상세보기</button>
        </p>
      </div>
      <div class="block">
        <div class="row">
          <div class="block-title block-title-medium">오늘의 운동지수</div>
          <div class="col">
            <div id="weather-dialog"
              class="elevation-demo elevation-6 elevation-hover-24 elevation-pressed-12 elevation-transition" style="height: 100px;
            margin: 10px 10px;
            background: green;
            font-size: 30px;
            font-weight: bold;
            text-align: center;
            line-height: 100px;">
              <i class="icon material-icons if-md" style="font-size:30px;">wb_sunny</i> 좋음
            </div>
          </div>
        </div>
      </div>

    </div>
  </div>
</template>
<script>
  import $$ from 'dom7';
  import Service from '../js/service';
  import HomeService from '../js/home';

  export default {
    data: function () {
      return {
        text: [
          "아무것도 안하고 계시네요..",
          "많이 더하셔야해요",
          "이제 시작입니다.",
          "조금만 더 하시면되요",
          "이제 거의다 왔어요",
          "완벽합니다!"
        ],
        band: ''
      }
    },
    method: {

    },
    on: {
      pageInit: function () {

        console.log('home init');
        const text = this.text;
        $$('#view-home').on('tab:show', function () {
          console.log('reinit home')
          Service.getPoint((data) => {
            this.band = data;

            console.log((data.total / 6).parseInt);
            HomeService.bandUpdate(data.total, text[parseInt(data.total / 2)]);
          });
        });

        HomeService.bandCreate(0, this.$app);

        Service.getPoint((data) => {
          this.band = data;

          console.log((data.total / 6).parseInt);
          HomeService.bandUpdate(data.total, text[parseInt(data.total / 2)]);
        });

        $$('.toolbar')[0].hidden = false;

        Service.getWeather((data) => {
          console.log(data);
          if (data[0].wth_activity_index === 'bad') {
            $$('#weather-dialog').css({
              background: 'red',
              color: '#ffffff'
            });
            $$('#weather-dialog').html(
              `<i class="icon material-icons if-md" style="font-size:30px;">wb_cloudy</i> 나쁨`);
          } else {
            $$('#weather-dialog').css({
              background: 'green',
              color: '#ffffff'
            });
            $$('#weather-dialog').html(
              `<i class="icon material-icons if-md" style="font-size:30px;">wb_sunny</i> 좋음`);
          }
        });

        this.$$('#detail-btn').on('click', function () {
          console.log('btn-click');
          $$('#tab-detail')[0].click();
        })

        this.$$('#photo-btn').on('click', function () {
          $$('#tab-photo')[0].click();
        })
      },
      pageMounted(event, pageData) {
        console.log('pageMounted')
      },
      pageReinit(event, pageData) {
        console.log('pageReinit')
      },
      pageBeforeIn(event, pageData) {
        console.log('pageBeforeIn')
      },
      pageAfterIn(event, pageData) {
        console.log('pageAfterIn')
      },
      pageBeforeOut(event, pageData) {
        console.log('pageBeforeOut')
      },
      pageAfterOut(event, pageData) {
        console.log('pageAfterOut')
      },
    },
    beforeCreate() {
      console.log('beforeCreate account')
    },
    created() {
      console.log('beforeDestroy account')
    },
    beforeMount() {
      console.log('beforeMount account')
    },
    mounted() {
      console.log('mounted account')
    },
    beforeUpdate() {
      console.log('beforeUpdate account')
    },
    updated() {
      console.log('updated account')
    },
    beforeDestroy() {
      console.log('beforeDestroy account')
    },
    destroyed() {
      console.log('destroyed account')
    },
  }
</script>